{"version":3,"sources":["blogPost.js"],"names":["require","JsonWebTokenError","mongoose","blogMessage","jwt","res","blogPost","regeneratorRuntime","async","_context","prev","next","awrap","find","sent","status","json","t0","message","stop","readPost","req","id","post","_context2","params","console","log","Types","ObjectId","isValid","abrupt","send","findById","createPost","newPost","_context3","body","deletePost","_context4","findByIdAndRemove","likePost","updatedPost","_context5","findByIdAndUpdate","likeCount","new","getPost"],"mappings":"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","file":"blogPost.min.js","sourcesContent":["const { JsonWebTokenError } = require('jsonwebtoken')\nconst mongoose = require('mongoose')\nconst blogMessage = require('../models/blogMessage')\nconst verify = require('../routes/verifyToken')\nconst jwt = ('jsonwebtoken')\n\n\nconst getPost = async (req,res)=>{\n  try {\n    const blogPost = await blogMessage.find()\n    res.status(200).json(blogPost)\n  } catch (error) {\n    res.status(404).json({message: error.message})\n  }\n}\n\nconst readPost = async(req,res) => {\n  const {id} = req.params\n  console.log(id)\n  if(!mongoose.Types.ObjectId.isValid(id)) return res.status(404).send('No Post with that id')\n\n  const post = await blogMessage.findById(id)\n\n  res.json(post)\n\n}\n\nconst createPost = async(req,res) => {\n  //withdraw post from req \n  const post = req.body\n  //To create new post push post inside blogMessage function\n  const newPost = new blogMessage(post)\n  try {\n    await newPost.save();\n    res.status(201).json(newPost)\n  } catch (error) {\n    res.status(409).json({message: error.message})\n  }\n}\n\nconst deletePost = async(req, res) => {\n  const {id} = req.params\n\n  if(!mongoose.Types.ObjectId.isValid(id)) return res.status(404).send('No post with that id')\n\n  await blogMessage.findByIdAndRemove(id)\n\n  res.json({message: 'Post deleted successfully'})\n\n}\n\n\nconst likePost = async(req, res) => {\n  const {id} = req.params\n  \n  if(!mongoose.Types.ObjectId.isValid(id)) return res.status(404).send('No post with that id')\n\n  const post = await blogMessage.findById(id)\n\n  const updatedPost = await blogMessage.findByIdAndUpdate(id, {likeCount: post.likeCount + 1}, {new: true})\n\n  res.json(updatedPost)\n}\n\n\n\nmodule.exports = {getPost, createPost, readPost, deletePost, likePost}\n\n"]}